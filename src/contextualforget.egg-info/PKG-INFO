Metadata-Version: 2.4
Name: contextualforget
Version: 0.0.1
Summary: Digital-twin Graph-RAG (IFC+BCF) with long-term memory and forgetting
Author: Eunchan Lee
License: MIT
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: networkx>=3.2
Requires-Dist: rich>=13.7
Requires-Dist: typer>=0.12
Requires-Dist: pydantic>=2.7
Requires-Dist: orjson>=3.10
Requires-Dist: numpy>=1.26
Requires-Dist: pandas>=2.2
Requires-Dist: python-dateutil>=2.9
Requires-Dist: tqdm>=4.66
Requires-Dist: whoosh>=2.7
Requires-Dist: matplotlib>=3.7
Requires-Dist: sentence-transformers>=2.2
Requires-Dist: scikit-learn>=1.3
Requires-Dist: langchain-core>=0.1.0
Requires-Dist: langchain-ollama>=0.1.0
Provides-Extra: dev
Requires-Dist: ruff>=0.5; extra == "dev"
Requires-Dist: pytest>=8.2; extra == "dev"
Requires-Dist: pytest-cov>=4.0; extra == "dev"
Provides-Extra: demo
Requires-Dist: jupyter>=1.0; extra == "demo"
Requires-Dist: jupyterlab>=4.0; extra == "demo"
Dynamic: license-file

# ContextualForget â€” Digital Twin Graph-RAG with Long-Term Memory & Real-time Updates

**IFC(ì •ì  êµ¬ì¡°) + BCF(ë™ì  ì´ìŠˆ)**ë¥¼ í•˜ë‚˜ì˜ ê·¸ë˜í”„ë¡œ ë¬¶ê³ , **TTL/ê°ì‡ /ìš”ì•½ì••ì¶•** ë§ê°ì„ ì ìš©í•˜ë©°,
**LLM ê¸°ë°˜ ìì—°ì–´ ì§ˆì˜**ì™€ **ì‹¤ì‹œê°„ íŒŒì¼ ëª¨ë‹ˆí„°ë§**ìœ¼ë¡œ "ë¬´ì—‡ì´/ì–´ë””ì„œ/ì–¸ì œ/ì™œ ë°”ë€Œì—ˆëŠ”ê°€"ë¥¼
**ê·¼ê±°ì™€ í•¨ê»˜** ë‹µí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

[![CI](https://github.com/sj31134/ContextualForget/workflows/CI/badge.svg)](https://github.com/sj31134/ContextualForget/actions)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- ğŸ§  **LLM ê¸°ë°˜ ìì—°ì–´ ì§ˆì˜**: Ollama(Qwen2.5:3b)ë¥¼ í™œìš©í•œ ì§ê´€ì ì¸ ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤
- ğŸ“¡ **ì‹¤ì‹œê°„ íŒŒì¼ ëª¨ë‹ˆí„°ë§**: IFC/BCF íŒŒì¼ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
- ğŸ•¸ï¸ **í†µí•© ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤**: IFC êµ¬ì¡°ì™€ BCF ì´ìŠˆë¥¼ í•˜ë‚˜ì˜ ì§€ì‹ ê·¸ë˜í”„ë¡œ í†µí•©
- â° **ë§ê° ë©”ì»¤ë‹ˆì¦˜**: TTL, Weighted Decay, Importance-Based ë“± ë‹¤ì–‘í•œ ì •ì±…
- ğŸ“Š **ê³ ê¸‰ ì¿¼ë¦¬ ì—”ì§„**: GUID, ì‘ì„±ì, í‚¤ì›Œë“œ, ì‹œê°„ ë²”ìœ„ ë“± ë‹¤ì°¨ì› ê²€ìƒ‰
- ğŸ“ˆ **ì‹œê°í™”**: ê·¸ë˜í”„ êµ¬ì¡°, íƒ€ì„ë¼ì¸, ë§ê° ê³¡ì„  ë“± ë‹¤ì–‘í•œ ì‹œê°í™” ë„êµ¬

## ğŸš€ Quickstart

```bash
# 1. Clone and setup
git clone https://github.com/sj31134/ContextualForget.git
cd ContextualForget
conda create -n contextualforget python=3.11 -y
conda activate contextualforget
pip install -e ".[dev,demo]"

# 2. (ì„ íƒ) Ollama LLM ì„¤ì¹˜
# https://ollama.aiì—ì„œ ë‹¤ìš´ë¡œë“œ í›„
ollama pull qwen2.5:3b

# 3. Generate diverse sample data (6 buildings, 87 nodes)
python scripts/generate_sample_data.py
python scripts/process_all_data.py

# 4. ìì—°ì–´ë¡œ ì§ˆì˜í•˜ê¸°
ctxf ask "ê·¸ë˜í”„ì— ëª‡ ê°œì˜ ë…¸ë“œê°€ ìˆì–´?"
ctxf chat  # ëŒ€í™”í˜• ëª¨ë“œ

# 5. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œì‘ (ë³„ë„ í„°ë¯¸ë„)
ctxf watch -w data -w data/raw -i 2.0
```

## ğŸ“Š Output

- `data/processed/graph.gpickle`: í†µí•© ê·¸ë˜í”„
- CLI JSON: ê´€ë ¨ BCF í† í”½, ìƒì„±ì‹œê°, IFC GUIDë¡œì˜ ê°„ì„ (ê·¼ê±°)
- `results/`: í‰ê°€ ê²°ê³¼ (`make eval`)

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì‹¤ì‹œê°„ íŒŒì¼ ëª¨ë‹ˆí„°ë§                         â”‚
â”‚         (FileWatcher â†’ GraphUpdater â†’ RealtimeMonitor)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
IFC Files â†’ IFC Parser â†’ Graph Builder â† BCF Parser â† BCF Files
                â†“                           â†“
            Entity Nodes â†â†’ Topic Nodes (with TTL filtering)
                â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  LLM ìì—°ì–´ ì²˜ë¦¬ (Qwen2.5)    â”‚
     â”‚  NaturalLanguageProcessor    â”‚
     â”‚  + LLMQueryEngine            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            Query Engine â†’ Results with Evidence
```

## ğŸ“ Project Structure

```
src/contextualforget/
â”œâ”€â”€ core/                    # í•µì‹¬ ê¸°ëŠ¥
â”‚   â”œâ”€â”€ forgetting.py       # ê¸°ë³¸ ë§ê° ë©”ì»¤ë‹ˆì¦˜
â”‚   â”œâ”€â”€ advanced_forgetting.py  # ê³ ê¸‰ ë§ê° ì •ì±…
â”‚   â”œâ”€â”€ utils.py           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ logging.py         # êµ¬ì¡°í™”ëœ ë¡œê¹…
â”‚   â”œâ”€â”€ monitoring.py      # ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
â”‚   â””â”€â”€ config.py          # ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ data/                   # ë°ì´í„° ì²˜ë¦¬
â”‚   â”œâ”€â”€ ingest_ifc.py      # IFC ë°ì´í„° ìˆ˜ì§‘
â”‚   â”œâ”€â”€ ingest_bcf.py      # BCF ë°ì´í„° ìˆ˜ì§‘
â”‚   â”œâ”€â”€ link_ifc_bcf.py    # IFC-BCF ì—°ê²°
â”‚   â””â”€â”€ build_graph.py     # ê·¸ë˜í”„ êµ¬ì¶•
â”œâ”€â”€ query/                  # ì¿¼ë¦¬ ì—”ì§„
â”‚   â”œâ”€â”€ query.py           # ê¸°ë³¸ ì¿¼ë¦¬
â”‚   â””â”€â”€ advanced_query.py  # ê³ ê¸‰ ì¿¼ë¦¬
â”œâ”€â”€ llm/                    # LLM í†µí•©
â”‚   â”œâ”€â”€ llm_processor.py   # LLM ì²˜ë¦¬ (Ollama)
â”‚   â””â”€â”€ natural_language_processor.py  # ìì—°ì–´ ì²˜ë¦¬
â”œâ”€â”€ realtime/               # ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ âœ¨ NEW
â”‚   â”œâ”€â”€ file_watcher.py    # íŒŒì¼ ì‹œìŠ¤í…œ ê°ì‹œ
â”‚   â”œâ”€â”€ graph_updater.py   # ë™ì  ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
â”‚   â””â”€â”€ realtime_monitor.py # ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
â”œâ”€â”€ visualization/          # ì‹œê°í™”
â”‚   â””â”€â”€ visualization.py   # ê·¸ë˜í”„ ì‹œê°í™”
â”œâ”€â”€ performance/            # ì„±ëŠ¥ ìµœì í™”
â”‚   â””â”€â”€ performance.py     # ì„±ëŠ¥ ë„êµ¬
â””â”€â”€ cli/                    # ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤
    â””â”€â”€ cli.py             # CLI ëª…ë ¹ì–´
```

## ğŸ“š Documentation

- [Tutorial](docs/tutorial.md) - Getting started guide
- [API Reference](docs/api_reference.md) - Complete API documentation
- [Research Plan](docs/research_plan.md) - í•œêµ­ì–´ ì—°êµ¬ ê³„íš
- [Long-term Memory Paper](docs/ltm_ifc_events.md) - ì˜ë¬¸ ì—°êµ¬ ë¬¸ì„œ

## ğŸ”§ Features

### í•µì‹¬ ê¸°ëŠ¥
- **IFC/BCF Integration**: ì •ì  êµ¬ì¡°ì™€ ë™ì  ì´ìŠˆ í†µí•©
- **Graph-based RAG**: NetworkX ê¸°ë°˜ ê·¸ë˜í”„ êµ¬ì¡°
- **Long-term Memory**: TTL ê¸°ë°˜ ë§ê° ë©”ì»¤ë‹ˆì¦˜
- **Evidence-based Queries**: ê·¼ê±°ì™€ í•¨ê»˜ ë‹µë³€ ì œê³µ
- **CLI Interface**: `ctxf` ëª…ë ¹ì–´ë¡œ ì‰¬ìš´ ì‚¬ìš©

### âœ¨ ìƒˆë¡œìš´ ê¸°ëŠ¥

#### ğŸ§  LLM ê¸°ë°˜ ìì—°ì–´ ì§ˆì˜
```bash
# ë‹¨ì¼ ì§ˆì˜
ctxf ask "í˜„ì¬ ê·¸ë˜í”„ì— ëª‡ ê°œì˜ ë…¸ë“œê°€ ìˆì–´?"

# ëŒ€í™”í˜• ëª¨ë“œ
ctxf chat
> í†µê³„ ì •ë³´ë¥¼ ë³´ì—¬ì¤˜
> GUID 1kTvXnbbzCWw8lcMd1dR4oë¥¼ ì°¾ì•„ì¤˜
> quit

# LLM ëª¨ë¸ ì •ë³´
ctxf model-info
```

#### ğŸ“¡ ì‹¤ì‹œê°„ íŒŒì¼ ëª¨ë‹ˆí„°ë§
```bash
# ê¸°ë³¸ ëª¨ë‹ˆí„°ë§ (data/, data/raw/ ê°ì‹œ)
ctxf watch

# ì»¤ìŠ¤í…€ ë””ë ‰í† ë¦¬ ê°ì‹œ
ctxf watch -w /path/to/project/ifc -w /path/to/project/bcf -i 5.0

# ë°ëª¨: ì‹¤ì‹œê°„ íŒŒì¼ ìƒì„± ì‹œì—°
# í„°ë¯¸ë„ 1
python scripts/demo_realtime.py

# í„°ë¯¸ë„ 2
ctxf watch -w data/demo -i 2.0
```

**ë™ì‘ ë°©ì‹:**
1. ì§€ì •ëœ ë””ë ‰í† ë¦¬ì˜ IFC/BCF íŒŒì¼ì„ ì£¼ê¸°ì ìœ¼ë¡œ ìŠ¤ìº”
2. íŒŒì¼ ìƒì„±/ìˆ˜ì •/ì‚­ì œ ê°ì§€
3. ìë™ìœ¼ë¡œ ê·¸ë˜í”„ì— ìƒˆ ë…¸ë“œ/ì—£ì§€ ì¶”ê°€
4. ì‹¤ì‹œê°„ í†µê³„ ë° ë¡œê·¸ ì¶œë ¥

#### ğŸ“Š ë‹¤ì–‘í•œ ìƒ˜í”Œ ë°ì´í„°
```bash
# 6ê°œ ê±´ë¬¼ ìœ í˜•, 81ê°œ ìš”ì†Œ, 27ê°œ ì´ìŠˆ ìƒì„±
python scripts/generate_sample_data.py

# ëª¨ë“  ë°ì´í„°ë¥¼ ê·¸ë˜í”„ë¡œ í†µí•©
python scripts/process_all_data.py
```

ìƒì„±ë˜ëŠ” ê±´ë¬¼:
- ì£¼ê±°ìš© ê±´ë¬¼ (Residential) - 15ê°œ ìš”ì†Œ
- ì˜¤í”¼ìŠ¤ ë¹Œë”© (Office) - 20ê°œ ìš”ì†Œ
- ê³µì¥ ê±´ë¬¼ (Industrial) - 12ê°œ ìš”ì†Œ
- ë³‘ì› (Hospital) - 18ê°œ ìš”ì†Œ
- í•™êµ (School) - 16ê°œ ìš”ì†Œ

## ğŸ› ï¸ Development

```bash
# Run tests
pytest

# Code formatting
ruff check .
ruff format .

# Clean up
make clean
```

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE) file for details.

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## ğŸ“ Support

- GitHub Issues: [Report bugs or request features](https://github.com/sj31134/ContextualForget/issues)
- Documentation: [docs/](docs/)

---

**Note**: ëŒ€í˜• íŒŒì¼ì€ Git LFS ê·œì¹™ì„ ì‚¬ìš©í•©ë‹ˆë‹¤ (`.gitattributes` ì°¸ì¡°).
